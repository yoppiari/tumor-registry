# INAMSOS Production Environment Configuration
# Indonesian Musculoskeletal Tumor Registry
# Copy this file to .env.production and fill in actual values

# ==========================================
# BUILD INFORMATION
# ==========================================
BUILD_DATE=2025-01-01T00:00:00Z
VCS_REF=main
VERSION=1.0.0

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================
APP_NAME=INAMSOS
APP_ENV=production
NODE_ENV=production

# Frontend Public URLs
NEXT_PUBLIC_API_URL=https://api.inamsos.kemenkes.go.id
NEXT_PUBLIC_APP_NAME=INAMSOS - Indonesian Musculoskeletal Tumor Registry
NEXT_PUBLIC_VERSION=1.0.0

# ==========================================
# DATABASE CONFIGURATION (PostgreSQL)
# ==========================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=inamsos_prod
POSTGRES_USER=inamsos_prod
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE_MIN_32_CHARS

# Full Database URL (constructed from above)
DATABASE_URL=postgresql://inamsos_prod:CHANGE_ME_STRONG_PASSWORD_HERE_MIN_32_CHARS@postgres:5432/inamsos_prod?schema=medical&connection_limit=20&pool_timeout=20

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_MIN_32_CHARS
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD_MIN_32_CHARS@redis:6379

# ==========================================
# JWT AUTHENTICATION
# ==========================================
# Generate strong secrets using: openssl rand -hex 64
JWT_SECRET=CHANGE_ME_JWT_SECRET_MIN_64_CHARS_USE_OPENSSL_RAND_HEX_64
JWT_REFRESH_SECRET=CHANGE_ME_JWT_REFRESH_SECRET_MIN_64_CHARS_USE_OPENSSL_RAND_HEX_64
JWT_EXPIRATION=3600
JWT_REFRESH_EXPIRATION=604800

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
# CORS Configuration
CORS_ORIGIN=https://inamsos.kemenkes.go.id,https://www.inamsos.kemenkes.go.id

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Session Secret
SESSION_SECRET=CHANGE_ME_SESSION_SECRET_MIN_64_CHARS

# ==========================================
# FILE UPLOAD CONFIGURATION
# ==========================================
FILE_UPLOAD_MAX_SIZE=104857600
FILE_UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,dicom,dcm,tiff,bmp

# MinIO Object Storage
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY_MIN_20_CHARS
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY_MIN_40_CHARS
MINIO_USE_SSL=false
MINIO_BUCKET=inamsos-uploads
MINIO_BROWSER=on

# ==========================================
# EMAIL CONFIGURATION (SMTP)
# ==========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@inamsos.kemenkes.go.id
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_FROM=INAMSOS <noreply@inamsos.kemenkes.go.id>
SMTP_FROM_NAME=INAMSOS Registry

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 2 * * *
BACKUP_S3_BUCKET=inamsos-backups
BACKUP_S3_REGION=ap-southeast-1

# ==========================================
# MONITORING & LOGGING
# ==========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m

# Sentry Error Tracking (Optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACE_SAMPLE_RATE=0.1

# ==========================================
# SSL/TLS CONFIGURATION
# ==========================================
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# ==========================================
# DOMAIN CONFIGURATION
# ==========================================
DOMAIN=inamsos.kemenkes.go.id
API_DOMAIN=api.inamsos.kemenkes.go.id

# ==========================================
# HOSPITAL/CENTER CONFIGURATION
# ==========================================
TOTAL_CENTERS=21
DEFAULT_CENTER_ID=rsupn-cipto-mangunkusumo

# ==========================================
# FEATURE FLAGS
# ==========================================
FEATURE_ANALYTICS_ENABLED=true
FEATURE_FILE_UPLOAD_ENABLED=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=false
FEATURE_MSTS_CALCULATOR=true
FEATURE_FOLLOW_UP_TRACKER=true

# ==========================================
# PERFORMANCE TUNING
# ==========================================
# Database Connection Pool
DB_POOL_MIN=10
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000

# Redis Memory
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# Node.js
NODE_OPTIONS=--max-old-space-size=2048

# ==========================================
# TIMEZONE
# ==========================================
TZ=Asia/Jakarta

# ==========================================
# SECURITY HEADERS
# ==========================================
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# ==========================================
# API KEYS (Third-party integrations)
# ==========================================
# Add your third-party API keys here if needed
# EXAMPLE_API_KEY=your_api_key_here

# ==========================================
# NOTES
# ==========================================
# 1. NEVER commit this file with actual secrets to version control
# 2. Use strong, randomly generated passwords (min 32 characters)
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use environment-specific secrets for dev/staging/production
# 5. Consider using secret management tools (e.g., AWS Secrets Manager, Vault)
